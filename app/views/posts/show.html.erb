<div class="banner">
  <div class="container pt-6 text-end">
    <% if user_signed_in? %>
      <%= link_to "Log out", destroy_user_session_path, method: :delete, class: "btn btn-light mt-3"%>
    <% else %>
      <a class="btn btn-light mt-3" href="/users/sign_in">Log in</a>
    <% end %>
  </div>
  <div class="container">
    <h1 class="text-white pt-3">PostFree</h1>
    <p class="text-white">Where true and relevant information is made.</p>
    <%= link_to posts_path do %>
      <div class="btn btn-light mt-3">Back to the list of posts</div>
    <% end %>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col bgcolor m-3">
      <div class="text-center mb-3 mt-2">
        <h1><%= @post.title %></h1>
      </div>
      <div class="text-justify box-link">
        <div class="background_text">
          <%= @post.content %>
        </div>
      </div>
      <div class="text-end mt-3">@copyright - Authored by <%= @post.user.nickname %></div>
    </div>
    <div class="col bgcolor m-3">
      <div class="text-center mb-3 mt-2">
        <h1>Comment section</h1>
      </div>
      <%= simple_form_for [@post, @comment] do |f| %>
        <div class="form-inputs-login">
          <%= f.input :content, as: :text, placeholder: "Write your comment here", label: false, class: "rounded" %>
        </div>
        <div class="form-actions ">
          <%= f.submit "Publish", class: 'btn-add btn-light' %>
        </div>

        <% if @comment.errors.any? %>
          <div class="alert alert-danger mt-3">
            <h4><%= pluralize(@comment.errors.count, "error") %> prohibited this comment from being saved:</h4>
            <ul>
              <% @comment.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>
      <% end %>

      <div class="comments mt-3 pb-1 mb-3">
        <ul class="list-unstyled">
          <% @post.comments.each do |comment| %>
            <li class="ms-2 me-2 pt-2 pb-2 mb-2 bg-comment"><span class="font-weight-bold font-italic"><%= comment.user.nickname %></span>, <%= comment.content %></li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>
</div>
